index配列の初期化
標準出力の値をindex配列に代入
docs配列の初期化
最初の項目であるか判定するフラグの初期化
tfのハッシュを初期化

indexの要素をforeachで参照する
これまでのdocs配列にdocidが含まれているかを判定するフラグの初期化
$indexの改行を削除
indexの項目をdocidとwordに分解

もしこれが最初の項目(foreachの最初の要素)であると判断されたら
docsにdocidを格納
フラグを立てる
12行目の括弧とじ

docsの要素を一つずつ参照
もしdocidが含まれていればフラグを立てる
foreachを終了
18行目の括弧とじ
17行目の括弧とじ

もしtfのハッシュにdocidとwordが対となったkeyが存在していれば
インクリメント
そうでなければ
新しくtfのハッシュを作成する
25行目の括弧とじ

もしdocidがdocsに含まれていなければ
docsにdocidを付与
29行目の括弧とじ

7行目の括弧とじ

ドキュメントの総数をとる
ドキュメントの総数を出力

tfのdocidをkeyとしてソートし
さらに項目でソートを行い
docid term その値を出力する
39行目の括弧とじ
38行目の括弧とじ
